<app-navbar></app-navbar>

<div class="form-bg">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-5">
        <div
          class="alert alert-danger text-center"
          role="alert"
          *ngIf="errorRegister"
        >
          {{ "error." + errorMsg | translate }}
        </div>
        <div class="form-container">
          <h3 class="title">{{ "register.register" | translate }}</h3>
          <form
            class="form-horizontal"
            [formGroup]="newUser!"
            (ngSubmit)="onSubmit()"
          >
            <div class="form-group">
              <label>{{ "register.username" | translate }}</label>
              <input
                required
                id="username"
                name="username"
                type="text"
                class="form-control"
                placeholder="{{ 'register.username' | translate }}"
                formControlName="username"
                [ngClass]="{
                  'is-invalid':
                    (newUser.get('username')!.touched ||
                      newUser.get('username')!.dirty) &&
                    !newUser.get('username')!.valid
                }"
              />
              <span class="invalid-feedback">
                {{ "register.usernameIsRequired" | translate }}
              </span>
            </div>
            <div class="form-group">
              <label>{{ "register.email" | translate }}</label>
              <input
                required
                id="email"
                name="email"
                type="email"
                class="form-control"
                placeholder="{{ 'register.email' | translate }}"
                formControlName="email"
                [ngClass]="{
                  'is-invalid':
                    (newUser.get('email')!.touched ||
                      newUser.get('email')!.dirty) &&
                    !newUser.get('email')!.valid
                }"
              />
              <span class="invalid-feedback">
                <span *ngIf="!newUser.get('email')!.errors?.['email']">
                  {{ "register.emailIsRequired" | translate }}
                </span>
              </span>
            </div>

            <div class="form-group">
              <label>{{ "register.password" | translate }}</label>
              <input
                required
                id="password"
                name="password"
                type="password"
                class="form-control"
                placeholder="{{ 'register.password' | translate }}"
                formControlName="password"
                [ngClass]="{
                  'is-invalid':
                    (newUser.get('password')!.touched ||
                      newUser.get('password')!.dirty) &&
                    !newUser.get('password')!.valid
                }"
              />
              <span class="invalid-feedback">
                <span *ngIf="newUser.get('password')!.errors">
                  {{ "register.passwordIsRequired" | translate }}
                </span>
              </span>
            </div>
            <div class="form-group">
              <label>{{ "register.password" | translate }}</label>
              <input
                required
                id="confirmPassword"
                name="confirmPassword"
                type="password"
                class="form-control"
                placeholder="{{ 'password' | translate }}"
                formControlName="confirmPassword"
                [ngClass]="{
                  'is-invalid':
                    newUser.get('confirmPassword')!.value !=
                    newUser.get('password')!.value
                }"
              />
              <span class="invalid-feedback">
                <span
                  *ngIf="
                    newUser.get('confirmPassword')!.value !=
                    newUser.get('password')!.value
                  "
                >
                  {{ "register.passwordsDoNotMatch" | translate }}
                </span>
              </span>
            </div>

            <div class="form-group">
              <label>{{ "register.role" | translate }}</label>
              <div class="row justify-content-center">
                <div class="col">
                  <div class="form-check-inline">
                    <input
                      type="radio"
                      name="isManager"
                      value="false"
                      formControlName="isManager"
                    />
                    <label class="form-check-label m-2" for="inlineRadio1">{{
                      "register.programmer" | translate
                    }}</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-check-inline">
                    <input
                      type="radio"
                      name="isManager"
                      value="true"
                      formControlName="isManager"
                    />
                    <label class="form-check-label m-2" for="inlineRadio2">{{
                      "register.manager" | translate
                    }}</label>
                  </div>
                </div>
              </div>
            </div>
            <span class="signin-link"
              >{{ "register.msgHaveAccount" | translate }}
              <a [routerLink]="'/login'">{{
                "register.login" | translate
              }}</a></span
            >
            <button
              *ngIf="!loading"
              class="btn signup"
              [disabled]="newUser.invalid"
            >
              {{ "register.createAccount" | translate }}
            </button>
            <button *ngIf="loading" class="btn signup" type="button" disabled>
              <span
                class="spinner-grow spinner-grow-sm"
                role="status"
                aria-hidden="true"
              ></span>
              {{ "register.createAccount" | translate }}
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
