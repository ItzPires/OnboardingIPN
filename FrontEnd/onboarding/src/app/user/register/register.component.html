<app-navbar></app-navbar>

<div class="form-bg">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-5">
        <div
          class="alert alert-danger text-center"
          role="alert"
          *ngIf="errorRegister"
        >
          {{ errorMsg }}
        </div>
        <div class="form-container">
          <h3 class="title">{{ "register.register" | translate }}</h3>
          <form
            class="form-horizontal"
            #form="ngForm"
            (ngSubmit)="onSubmit(form)"
          >
            <div class="form-group">
              <label>{{ "register.username" | translate }}</label>
              <input
                required
                id="username"
                name="username"
                type="text"
                #username="ngModel"
                class="form-control"
                placeholder="{{ 'register.username' | translate }}"
                [(ngModel)]="newUser.username"
                [ngClass]="{
                  'is-invalid':
                    (username.touched || username.dirty) && !username.valid
                }"
              />
              <span class="invalid-feedback">
                {{ "register.usernameIsRequired" | translate }}
              </span>
            </div>
            <div class="form-group">
              <label>{{ "register.email" | translate }}</label>
              <input
                required
                id="email"
                name="email"
                type="email"
                #email="ngModel"
                class="form-control"
                placeholder="{{ 'register.email' | translate }}"
                [(ngModel)]="newUser.email"
                [ngClass]="{
                  'is-invalid':
                  (email.touched || email.dirty) && !isValidEmail(newUser.email)
                }"
              />
              <span class="invalid-feedback">
                <span *ngIf="password.errors">
                  {{ "register.emailIsRequired" | translate }}
                </span>
              </span>
            </div>
            <div class="form-group">
              <label>{{ "register.password" | translate }}</label>
              <input
                required
                id="password"
                name="password"
                type="password"
                #password="ngModel"
                class="form-control"
                placeholder="{{ 'register.password' | translate }}"
                [(ngModel)]="newUser.password"
                [ngClass]="{
                  'is-invalid':
                    (password.touched || password.dirty) && !password.valid
                }"
              />
              <span class="invalid-feedback">
                <span *ngIf="password.errors">
                  {{ "register.passwordIsRequired" | translate }}
                </span>
              </span>
            </div>
            <div class="form-group">
              <label>{{ "register.role" | translate }}</label>
              <div class="row justify-content-center">
                <div class="col">
                  <div class="form-check-inline">
                    <input
                      type="radio"
                      name="isManager"
                      value="false"
                      [(ngModel)]="newUser.isManager"
                    />
                    <label class="form-check-label m-2" for="inlineRadio1">{{
                      "register.programmer" | translate
                    }}</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-check-inline">
                    <input
                      type="radio"
                      name="isManager"
                      value="true"
                      [(ngModel)]="newUser.isManager"
                    />
                    <label class="form-check-label m-2" for="inlineRadio2">{{
                      "register.manager" | translate
                    }}</label>
                  </div>
                </div>
              </div>
            </div>
            <span class="signin-link"
              >{{ "register.msgHaveAccount" | translate }}
              <a [routerLink]="'/login'">{{
                "register.login" | translate
              }}</a></span
            >
            <button *ngIf="!loading" class="btn signup">
              {{ "register.createAccount" | translate }}
            </button>
            <button *ngIf="loading" class="btn signup" type="button" disabled>
              <span
                class="spinner-grow spinner-grow-sm"
                role="status"
                aria-hidden="true"
              ></span>
              {{ "register.createAccount" | translate }}
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
